## Context

Нужно получать официальный курс USD/RUB от ЦБ РФ за последние 7 дней и сохранять локально в Parquet. Проект — учебный, поэтому важно зафиксировать поведение на пограничных случаях (выходные, отсутствие данных за “сегодня”, сетевые ошибки) до написания кода.

## Goals / Non-Goals

- Goals:
  - Получать значения курса USD/RUB за диапазон “последние 7 дней”, где последний день — текущая дата.
  - Сохранять результат в Parquet в локальную папку.
  - Покрыть логику unit-тестами и добавить интеграционные тесты с реальным API ЦБ РФ.
- Non-Goals:
  - Универсальная поддержка всех валют/инструментов (пока только USD/RUB).
  - Облачный деплой/планировщик/фоновые задачи.

## Decisions

- Источник данных:
  - Используем официальный публичный API/интерфейсы ЦБ РФ для получения значений курса USD/RUB.
- Окно данных:
  - Диапазон дат: \([today-6; today]\), где `today` — локальная календарная дата запуска.
  - Возвращаем/сохраняем столько значений, сколько реально отдал источник в указанном диапазоне.
- Формат хранения:
  - Parquet-файл в локальной папке.
  - Папка назначения: **текущая папка** (cwd).
  - Имя файла включает **дату** и **время запуска** (локальное время запуска).
  - Минимальная схема (предварительно): `date`, `pair`, `rate`, `source`, `retrieved_at`.

## Risks / Trade-offs

- Реальный API может быть недоступен/нестабилен → интеграционные тесты могут флапать.
  - Митигация: отделить “быстрые” unit-тесты от интеграционных; интеграционные запускать по явному флагу/в отдельном job (зафиксируем при появлении CI).
- “Сегодняшний” курс может быть опубликован позже времени запуска.
  - Митигация: явное правило в спеках (ошибка или частичный успех).

## Migration Plan

Не требуется (первый функциональный модуль).

## Open Questions

Нет (зафиксировано в спеках и `proposal.md`).
