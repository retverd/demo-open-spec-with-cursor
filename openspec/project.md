# Контекст проекта

## Назначение

Этот репозиторий — публичный туториал/демо по **spec-driven development** с использованием **OpenSpec** в связке с **Cursor Pro** на примере реального проекта.

Функциональная цель проекта:

- Сбор котировок с **МосБиржи**.
- Сбор курсов валют с сайта **ЦБ РФ**.
- Сохранение собранных данных **в локальные файлы**.

Цели как туториала:

- Зафиксировать “конституцию” проекта (соглашения, подходы, ограничения) в `openspec/project.md`.
- Проходить полный цикл OpenSpec: **changes → validate → implementation → archive** на небольших изолированных изменениях.
- Накапливать наблюдения и улучшать процесс (см. `JOURNAL.md`).

## Технологический стек

Текущий стек

- **OpenSpec CLI**: 0.16.0 - генерация спецификаций и кода по ним;
- **Python**: 3.14.2 - сбор и сохранение данных;
- **Markdown**: основный формат для спецификаций/предложений/дизайна;
- **Запуск**: локально.

Примечания:

- Конкретные библиотеки (HTTP-клиент, парсинг, сериализация) фиксируем в спеках/changes по мере появления кода.
- Хранилище — файлы, формат фиксируем при реализации.

Инструменты/инфраструктура:

- **Cursor Pro** (IDE) для работы с агентом и кодом/спеками
- **Git + GitHub** (репозиторий, история изменений)

## Соглашения проекта

### Стиль кода и документации

- **Язык документов**: русский.
- **Тон**: максимально конкретно; списки вместо “воды”; решения и компромиссы фиксируем явно.
- **Именование**:
  - Capability ID: `verb-noun` (например, `user-auth`, `spec-tooling`).
  - Change ID: kebab-case, глагол в начале (`add-...`, `update-...`, `remove-...`, `refactor-...`).
- **OpenSpec формат**:
  - Требования пишем **по-русски** нормативно: “Система ДОЛЖНА …”, “Система НЕ ДОЛЖНА …”.
  - У каждого требования минимум один `#### Scenario:` (формат OpenSpec).

Формат ссылок:

- На код и места в репозитории: `path/to/file.ext:line` (когда уместно).

### Архитектурные паттерны

Архитектура процесса (источник истины):

- `openspec/specs/` — **текущее состояние** (“что уже построено”).
- `openspec/changes/` — **предложения изменений** (“что хотим изменить”), до одобрения и реализации.
- `openspec/changes/archive/` — архив завершенных изменений (после внедрения).

Паттерны разработки:

- Сначала спецификация/дельта-спека, затем реализация (если есть код), затем архивирование.
- Изменения держим небольшими и изолированными (проще валидировать и обсуждать).

TODO (когда появится первая спецификация для кодовой базы — фиксируем это в ней и обновляем данный раздел):

- Целевая архитектура (монолит/модулярный монолит/микросервисы), границы модулей.
- Контракты (API/схемы), хранение данных, интеграции.

### Стратегия тестирования

Базовые проверки:

- Валидируем спеки и изменения командой `openspec validate --strict` (для change/spec по ситуации).

Тестирование (когда появляется код) — обязательно:

- **Unit-тесты**: обязательны.
- **Интеграционные тесты**: обязательны и выполняются **с реальными системами** (МосБиржа/ЦБ РФ).

Примечание:

- По мере появления CI зафиксируем, где именно гоняются “реальные” интеграционные тесты (локально/по флагу/по расписанию), чтобы не упираться в лимиты и нестабильность сетей.

### Git workflow

Рекомендуемый минимум:

- Небольшие атомарные коммиты, понятная история.
- В PR/описании коммита указывать связанный change-id (если применимо).

Принятый процесс:

- Ветвление: **feature-ветки + PR** (прямых коммитов в `main` избегаем).
- Конвенция коммитов: **свободно** (Conventional Commits не требуется).

## Доменный контекст

Ключевые понятия OpenSpec для этого репозитория:

- **spec**: спецификация capability (требования + сценарии), “истина” о том, что уже есть.
- **change**: предложение изменения (proposal + tasks + deltas), то, что еще не реализовано.
- **validate**: строгая проверка структуры/формата, гарантирующая, что требования и сценарии валидны.
- **archive**: перенос завершенного change в архив после внедрения.

## Важные ограничения

- Проект учебный/демонстрационный: приоритет — ясность процесса, повторяемость шагов и простота.
- Предпочтение “boring solutions”: минимальная сложность без необходимости.

Дополнительных ограничений (лицензия/приватность/регуляторика/платформы) — нет.

## Внешние зависимости

Источники данных (внешние системы):

- **МосБиржа**: получение котировок через публичные интерфейсы/API.
- **ЦБ РФ**: получение курсов валют через публичные интерфейсы/API.

Секреты/API-ключи:

- Используются **публичные** источники без ключей.
